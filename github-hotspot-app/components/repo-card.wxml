<!-- components/repo-card.wxml -->
<view class="card repo-card" bindtap="onTapCard">
  <!-- 仓库头部信息：作者头像和仓库名 -->
  <view class="flex-row">
    <image class="avatar" src="{{repo.owner.avatar_url}}" mode="aspectFill"></image>
    <view class="flex-column repo-info">
      <text class="title">{{repo.full_name}}</text>
      <text class="text-secondary" wx:if="{{repo.private}}">私有仓库</text>
    </view>
  </view>
  
  <!-- 仓库描述 -->
  <view class="description" wx:if="{{repo.description}}">{{repo.description}}</view>
  
  <!-- 仓库标签 -->
  <view class="flex-row flex-wrap tags" wx:if="{{repo.topics && repo.topics.length > 0}}">
    <view class="badge badge-primary" wx:for="{{repo.topics}}" wx:key="*this" wx:if="{{index < 3}}">
      {{item}}
    </view>
    <view class="badge badge-primary" wx:if="{{repo.topics.length > 3}}">+{{repo.topics.length - 3}}</view>
  </view>
  
  <!-- 仓库统计信息 -->
  <view class="flex-row flex-between stats">
    <view class="flex-row">
      <view class="flex-row meta" wx:if="{{repo.language}}">
        <view class="language-dot" style="background-color: {{repo.language_color || '#563d7c'}}"></view>
        <text>{{repo.language}}</text>
      </view>
      <view class="flex-row meta">
        <image class="icon-small" src="../images/star.png" mode="aspectFit"></image>
        <text>{{repo.stargazers_count}}</text>
      </view>
      <view class="flex-row meta">
        <image class="icon-small" src="../images/fork.png" mode="aspectFit"></image>
        <text>{{repo.forks_count}}</text>
      </view>
      <view class="flex-row meta" wx:if="{{repo.open_issues_count}}">
        <image class="icon-small" src="../images/issue.png" mode="aspectFit"></image>
        <text>{{repo.open_issues_count}}</text>
      </view>
    </view>
    
    <!-- 收藏按钮 -->
    <button class="star-btn" catchtap="onFavorite">
      <image class="star-icon" src="{{isFavorited ? '../images/star_filled.png' : '../images/star_outline.png'}}" mode="aspectFit"></image>
    </button>
  </view>
  
  <!-- 最近更新时间 -->
  <view class="updated-at text-secondary" wx:if="{{repo.updated_at}}">
    最近更新于 {{formatTime(repo.updated_at)}}
  </view>
</view> 